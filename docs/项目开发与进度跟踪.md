# AetherFlow 项目开发与进度跟踪

## 用户旅程与功能完成状态

### 用户旅程概览

下面是从用户体验视角展示的AetherFlow主要功能流程及其完成状态：

```
┌─────────────────────────────────────────────────────────────────────┐
│                        AetherFlow 用户旅程图                         │
└─────────────────────────────────────────────────────────────────────┘

┌─────────────┐     
│  注册/登录  │ ⏳    
│  创建账号   │     
└──────┬──────┘     
       │            
       ▼            
┌─────────────┐
│  选择入口   │
│插件端/网页端│
└──────┬──────┘
       │
       ├─────────────────────┐
       │                     │
       ▼                     ▼
┌─────────────────┐    ┌─────────────────┐
│   插件端入口    │    │   网页端入口    │
└────────┬────────┘    └────────┬────────┘
         │                      │
         ▼                      ▼
┌─────────────────────────────────────┐    ┌─────────────────────────────────┐
│          插件端功能模块             │    │         网页端功能模块          │
├─────────────────────────────────────┤    ├─────────────────────────────────┤
│                                     │    │                                 │
│  ┌─────────────┐     ┌────────────┐ │    │ ┌─────────────┐  ┌────────────┐ │
│  │ 自动保存 ✅ │────▶│提示词库 ✅ │ │    │ │提示词管理 ⏳│─▶│标签管理 ⏳ │ │
│  └──────┬──────┘     └─────┬──────┘ │    │ └──────┬──────┘  └─────┬──────┘ │
│         │                  │        │    │        │               │       │
│         │                  ▼        │    │        │               ▼       │
│         │           ┌────────────┐  │    │        │        ┌────────────┐ │
│         └──────────▶│快捷指令 ✅ │  │    │        └───────▶│资产仪表盘❌│ │
│                     └─────┬──────┘  │    │                 └─────┬──────┘ │
│                           │         │    │                       │       │
│                           ▼         │    │                       ▼       │
│                    ┌────────────┐   │    │                ┌────────────┐ │
│                    │提示词优化✅│   │    │                │沙盘调试 ❌ │ │
│                    └─────┬──────┘   │    │                └────────────┘ │
│                           │         │    │                               │
│                           ▼         │    │                               │
│                    ┌────────────┐   │    │                               │
│                    │系统推荐 ❌ │   │    │                               │
│                    └────────────┘   │    │                               │
│                                     │    │                               │
└─────────────────────────────────────┘    └─────────────────────────────────┘
                    │                                     │
                    └──────────────┬──────────────────────┘
                                   │
                                   ▼
                          ┌─────────────────┐
                          │   数据同步 ⏳   │
                          │ 插件端↔网页端   │
                          └─────────────────┘

完成状态图例:
✅ - 已完成  |  ⏳ - 进行中  |  ❌ - 未开始
```

### 用户功能完成状态

#### 0. 注册/登录功能 ⏳
**用户体验**: 用户注册账号并登录系统，获取使用其他功能的权限
- ⏳ 用户注册（进行中）
- ⏳ 用户登录（进行中）
- ⏳ 密码重置（计划中）
- ⏳ 用户信息管理（计划中）
**测试记录**:
- ❌ 单元测试尚未编写
- ❌ 人工测试尚未进行

#### 1. 浏览器插件 - 自动保存功能 ✅
**用户体验**: 用户与AI平台对话时，系统自动保存对话内容
- ✅ 自动检测并保存用户与AI平台的对话
- ✅ 保存对话的平台信息、时间、链接
- ✅ 保存本轮提问与回答内容
- ✅ 滚动存储机制（保留最近100条未收藏对话）
- ✅ 显示保存状态通知
**测试记录**:
- ✅ 单元测试通过 (2025-03-08) - 创建了AutoSave.test.jsx并测试了核心功能
- ❌ 人工测试尚未进行

#### 2. 浏览器插件 - 提示词快捷指令 (PromptImage) ✅
**用户体验**: 用户在输入框中输入"/"后显示提示词下拉菜单，可快速插入提示词
- ✅ 输入"/"触发下拉菜单
- ✅ 输入关键词实时搜索提示词
- ✅ 按"收藏>高频使用>低频使用"排序显示结果
- ✅ 支持键盘导航和选择
- ✅ 选择后自动插入提示词到输入框
**测试记录**:
- ✅ 单元测试通过 (2025-03-08)
- ✅ 人工测试通过 (2025-03-08) - 修复了选择提示词后不插入的问题，现已正常工作

#### 3. 浏览器插件 - 提示词库管理 ✅
**用户体验**: 用户可在插件侧边栏浏览、搜索和管理提示词
- ✅ 展示提示词卡片列表
- ✅ 支持关键词搜索
- ✅ 支持标签筛选
- ✅ 支持多种排序方式（使用频率/收藏/时间）
- ✅ 点击卡片显示详细内容
- ✅ 支持插入和复制功能
**测试记录**:
- ✅ 单元测试通过 (2025-03-08) - PromptLibrary.test.jsx测试了核心功能
- ❌ 人工测试尚未进行

#### 4. 浏览器插件 - 提示词优化 ✅
**用户体验**: 用户可优化原始提示词，获得更高质量的提示词
- ✅ 输入原始提示词
- ✅ 设置优化参数
- ✅ 优化过程动画效果
- ✅ 展示优化结果
- ✅ 支持继续优化、插入和复制功能
**测试记录**:
- ✅ 单元测试通过 (2025-03-08) - PromptEnhancement.test.jsx测试了核心功能
- ❌ 人工测试尚未进行

#### 5. 浏览器插件 - 系统推荐 (Suggestion) ❌
**用户体验**: 系统根据上下文推荐相关提示词
- ❌ 预设提示词推荐
- ❌ 上下文相关推荐
- ❌ 个性化推荐
**测试记录**:
- ❌ 单元测试尚未编写
- ❌ 人工测试尚未进行

#### 6. 网页端 - 提示词管理平台 ⏳
**用户体验**: 用户可在网页端浏览和管理所有提示词
- ⏳ 提示词卡片展示（进行中）
- ⏳ 搜索和标签筛选（进行中）
- ⏳ 排序和筛选功能（进行中）
- ⏳ 详细信息查看（进行中）
**测试记录**:
- ❌ 单元测试尚未编写
- ❌ 人工测试尚未进行

#### 7. 网页端 - 资产仪表盘 ❌
**用户体验**: 用户可查看提示词资产的数据可视化
- ❌ 词云图（标签频数）
- ❌ 雷达图（提示词质量评分）
- ❌ 热力图（用户使用时间分布）
- ❌ 使用统计和趋势分析
**测试记录**:
- ❌ 单元测试尚未编写
- ❌ 人工测试尚未进行

#### 8. 网页端 - 沙盘调试功能 ❌
**用户体验**: 用户可在网页端测试和优化提示词
- ❌ 大模型API调用
- ❌ 对话界面
- ❌ 对话历史管理
- ❌ 提示词测试功能
**测试记录**:
- ❌ 单元测试尚未编写
- ❌ 人工测试尚未进行

### 用户场景示例

#### 场景1: 日常使用AI助手 ⏳
小明正在使用ChatGPT写一篇文章。他输入了几个问题并获得了回答。AetherFlow插件自动保存了这些对话，方便他日后查看。当他需要一个特定的提示词时，他在输入框中输入"/"，立即看到了之前使用过的提示词列表，选择后直接插入到输入框中，大大提高了效率。
**测试状态**: 提示词快捷指令功能已通过单元测试和人工测试，自动保存功能已通过单元测试但尚未进行人工测试验证。

#### 场景2: 提示词优化 ⏳
小红想要生成一篇高质量的营销文案，但她不确定如何编写最有效的提示词。她打开AetherFlow插件，在提示词优化页面输入了一个简单的提示："写一篇关于新款智能手表的广告文案"。点击"优化"按钮后，她看到了一系列精美的动画效果：旋转的加载指示器变成了脉动的魔法球，然后显示"正在优化您的提示..."。几秒钟后，系统返回了一个更加详细和有效的提示词："创作一篇引人入胜的广告文案，突出新款智能手表的创新功能、健康监测能力和时尚设计。针对25-45岁的专业人士，强调产品如何帮助他们平衡工作与健康。包含吸引人的标题、3-5个核心卖点和有力的行动召唤。语调应专业而充满热情，长度控制在300字以内。"小红对结果非常满意，点击"插入"按钮将优化后的提示词直接插入到ChatGPT输入框中。
**测试状态**: 提示词优化功能已通过单元测试，但尚未进行人工测试验证。

#### 场景3: 网页端管理 ❌
张三是一名内容创作者，他积累了大量优质提示词。他登录AetherFlow网页端，在提示词管理平台上浏览自己的提示词集合。他可以按标签筛选，查看使用频率最高的提示词，并对它们进行编辑和组织。在资产仪表盘页面，他可以看到自己的提示词使用趋势和质量分布，帮助他了解自己的提示词资产状况。当他需要测试新的提示词时，他会使用沙盘调试功能，直接与不同的大模型进行对话测试，并根据结果优化提示词。
**测试状态**: 网页端功能正在开发中，尚未完成，无法进行测试。

#### 场景4: 后端开发
1. **基础架构**
   - Express应用配置
   - MongoDB连接
   - 错误处理中间件
   - 认证中间件
   - 日志系统
   - 响应处理工具

2. **用户认证**
   - 用户模型
   - 注册功能
   - 登录功能
   - JWT认证
   - 用户信息更新

3. **提示词管理**
   - 提示词模型
   - 创建提示词
   - 获取提示词列表
   - 更新提示词
   - 删除提示词
   - 自动保存提示词
   - 快速搜索提示词
   - 批量获取提示词

4. **标签管理**
   - 标签模型
   - 创建标签
   - 获取标签列表
   - 更新标签
   - 删除标签
   - 获取标签关联的提示词

5. **会话管理**
   - 会话模型
   - 创建会话
   - 获取会话列表
   - 更新会话
   - 删除会话
   - 添加消息到会话
   - 清空会话消息

6. **活动日志**
   - 活动日志模型
   - 记录用户活动
   - 获取活动日志
   - 获取活动统计
   - 清除活动日志

7. **提示词优化**
   - 优化历史模型
   - API密钥管理模型
   - 提示词优化API
   - 多模型支持
   - 客户端/服务端优化模式
   - 多轮优化支持
   - 优化历史记录
   - 优化结果评价

8. **测试**
   - Jest测试框架
   - 测试环境配置
   - 单元测试
   - 集成测试
   - 模拟API服务器

#### 前端开发
1. **API客户端**
   - 创建axios实例
   - 配置请求和响应拦截器
   - 实现认证令牌管理
   - 定义API端点（认证、提示词、标签、优化）
   - 错误处理机制

2. **核心组件**
   - `PromptLibrary`组件：提示词库展示、搜索、标签筛选、排序、复制和收藏功能
   - `SearchSuggestion`组件：实时搜索提示词，显示搜索结果
   - `AutoSave`组件：自动保存用户提示词，显示保存历史

3. **测试**
   - 为核心组件编写测试用例
   - 模拟API客户端
   - 测试环境配置
   - 单元测试

4. **环境配置**
   - 前端环境变量设置
   - 测试环境配置
   - 构建配置

### 进行中功能

1. **前端高级功能**
   - Prompt Enhancement功能
   - 资产仪表盘
   - 沙盘调试功能

2. **浏览器插件开发**
   - 插件架构设计
   - 提示词自动保存功能
   - 提示词快速搜索功能
   - 系统预设提示词推荐

3. **网页端开发**
   - Prompt管理界面
   - 资产仪表盘界面
   - 沙盘调试界面

### 待开发功能

1. **前端扩展功能**
   - Suggestion功能（P2）
   - 个性化推荐算法
   - 推荐展示界面

2. **部署准备**
   - 配置生产环境
   - 设置CI/CD流程
   - 实现自动化部署

## 集成路线图

### 阶段一：基础集成（已完成）

#### 目标
建立基本的前后端连接，实现核心API的调用，确保数据流通畅。

#### 里程碑
1. **API客户端实现**（已完成）
   - 创建统一的API客户端模块
   - 实现基本的请求/响应处理
   - 添加错误处理机制
   - 实现认证令牌管理

2. **用户认证集成**（已完成）
   - 实现注册功能
   - 实现登录功能
   - 实现令牌刷新机制
   - 实现会话持久化

3. **提示词基础功能集成**（已完成）
   - 实现提示词创建和保存
   - 实现提示词列表获取
   - 实现提示词搜索
   - 实现提示词更新和删除

#### 交付物
- 功能完整的API客户端
- 用户认证流程
- 提示词基础管理功能
- 集成测试套件

### 阶段二：核心功能集成（进行中）

#### 目标
集成P0级核心功能，确保浏览器插件和网页端能够共享数据和状态。

#### 里程碑
1. **标签管理集成**（已完成）
   - 实现标签创建和管理
   - 实现标签与提示词关联
   - 实现按标签筛选提示词

2. **Prompt Library集成**（已完成）
   - 实现提示词卡片组件
   - 实现提示词详情模态窗口
   - 实现提示词插入功能

3. **Prompt Save集成**（已完成）
   - 实现自动保存功能
   - 实现保存历史记录
   - 实现保存通知

4. **Prompt Image集成**（进行中）
   - 实现快捷指令搜索
   - 实现实时提示词建议
   - 实现提示词插入

#### 交付物
- 完整的标签管理系统
- 功能完整的Prompt Library
- 自动保存机制
- 快捷指令搜索系统
- 端到端测试套件

### 阶段三：高级功能集成（即将开始）

#### 目标
集成P1级高级功能，增强产品的竞争力和用户体验。

#### 里程碑
1. **Prompt Enhancement集成**（即将开始）
   - 实现提示词优化API调用
   - 实现优化结果展示
   - 实现多轮优化
   - 实现优化历史记录

2. **资产仪表盘集成**（计划中）
   - 实现数据获取和处理
   - 实现词云图组件
   - 实现雷达图组件
   - 实现热力图组件

3. **沙盘调试集成**（计划中）
   - 实现大模型API调用
   - 实现对话界面
   - 实现对话历史管理
   - 实现提示词测试功能

#### 交付物
- 提示词优化系统
- 数据可视化仪表盘
- 沙盘调试环境
- 性能测试报告

### 阶段四：扩展功能与优化（计划中）

#### 目标
集成P2级扩展功能，优化整体性能和用户体验，准备产品发布。

#### 里程碑
1. **Suggestion功能集成**（计划中）
   - 实现系统预设提示词推荐
   - 实现个性化推荐算法
   - 实现推荐展示界面

2. **性能优化**（计划中）
   - 实现数据缓存机制
   - 优化API请求频率
   - 优化前端渲染性能
   - 实现懒加载和代码分割

3. **跨平台兼容性优化**（计划中）
   - 确保浏览器兼容性
   - 优化移动设备体验
   - 测试不同环境下的性能

4. **最终集成与测试**（计划中）
   - 全面集成测试
   - 用户体验测试
   - 安全测试
   - 性能基准测试

#### 交付物
- 智能推荐系统
- 性能优化报告
- 兼容性测试报告
- 最终集成测试报告
- 产品发布候选版本

## 当前任务跟踪

### 进行中任务

1. **Prompt Enhancement功能开发**
   - 负责人：我们两人
   - 状态：即将开始
   - 预计完成时间：2周内
   - 详细任务：
     - 实现提示词优化界面
     - 集成提示词优化API
     - 实现优化结果展示
     - 实现多轮优化功能

2. **网页端Prompt管理开发**
   - 负责人：我们两人
   - 状态：计划中
   - 预计开始时间：Prompt Enhancement完成后
   - 详细任务：
     - 实现Prompt管理界面
     - 实现卡片展示区
     - 实现搜索和标签筛选
     - 实现排序和筛选功能

3. **端到端测试**
   - 负责人：我们两人
   - 状态：进行中
   - 预计完成时间：持续进行
   - 详细任务：
     - 编写更多测试用例
     - 执行测试并修复问题
     - 确保组件间协同工作正常

### 待解决问题

1. **性能优化**
   - 问题描述：某些API请求响应时间过长
   - 优先级：中
   - 解决方案：实现缓存机制，优化数据库查询

2. **UI一致性**
   - 问题描述：确保插件和网页端的UI风格一致
   - 优先级：高
   - 解决方案：创建共享组件库，统一设计语言

## 风险管理

### 潜在风险

1. **技术风险**
   - API变更导致集成失败
   - 性能问题影响用户体验
   - 浏览器兼容性问题

2. **项目风险**
   - 时间估计不准确
   - 资源分配不合理
   - 需求变更频繁

### 风险缓解策略

1. **技术风险缓解**
   - 建立API版本控制机制
   - 进行早期性能测试和优化
   - 全面的浏览器兼容性测试

2. **项目风险缓解**
   - 添加缓冲时间到估计中
   - 灵活的资源分配机制
   - 敏捷开发方法应对变更

## 下一步计划

1. **短期计划（1-2周）**
   - 开发Prompt Enhancement功能
   - 完善现有组件的测试覆盖率
   - 解决已知的UI一致性问题

2. **中期计划（3-4周）**
   - 开发网页端Prompt管理功能
   - 开始资产仪表盘开发
   - 进行性能优化

3. **长期计划（1-2个月）**
   - 完成所有P1级功能
   - 开始P2级功能开发
   - 准备产品发布

最后更新时间：2023年11月15日 
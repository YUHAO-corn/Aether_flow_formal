## 核心需求
将网页（文件：sb1-w4ariupj-7 ​完整迁移为浏览器插件，并满足以下要求：
- 界面完全一致：像素级复刻原网页模块的视觉样式（字体、颜色、间距），保持与原界面像素级一致​（字体、间距、颜色等），仅按比例缩小至 1/5 屏尺寸
- 功能等价：保留原网页的交互逻辑（如按钮点击、表单提交），但需替换数据请求方式为插件兼容方案。
P.S. 在项目目录下新建一个浏览器插件目录AetherFlow_extenstion_front用于存放浏览器插件文件

## 其他需求
- ​右侧贴合 & 可折叠：插件默认贴浏览器右侧显示，可折叠缩进至边缘，​不遮挡主页面左侧“画板”核心区域。
- ​增强交互：增加用户登录/注册入口（集成到插件设置界面）。
- 浏览器插件化约束
弹窗关闭时保留必要状态（例如用户输入暂存），使用浏览器插件专用 API（如存储、跨域请求）。



### 需求明细
1. 插件基础规格
​尺寸：
展开宽度：1/5屏幕宽度（动态计算，例：1920px屏幕下为384px）
折叠宽度：20px
​位置：
默认贴浏览器右侧边缘（零间距），高度与视口一致，​不随页面滚动移动。
用户可拖拽插件左边缘调整宽度（范围：200px ~ 1/3屏幕宽度）。

插件隐藏功能说明
​问题描述：需要添加一个隐藏按钮，点击后插件可以缩到页面右侧，再次点击时展开。
​解决方案：
在插件界面添加一个“隐藏/展开”按钮，点击后触发以下逻辑：
​隐藏状态：插件宽度缩小为一个小图标（如 20px），仅显示按钮，插件内容隐藏。
​展开状态：插件恢复原始宽度，显示完整内容。
使用 CSS 过渡效果（如 transition）实现平滑的隐藏和展开动画。
按钮样式应简洁直观，例如使用“◀”和“▶”图标表示隐藏和展开状态。

2. 登录/注册入口：
在插件设置界面（⚙️图标）中增加表单，需支持：
保存用户凭证（加密存储至chrome.storage）
同步登录状态至插件全局（如显示用户头像） 

3.性能与兼容性

​加载速度：插件初始化时间≤1秒（需压缩图片/代码）。
​多端适配：
平板设备默认以折叠模式启动。
禁止使用vw/vh单位（防止小屏布局错乱）。

### 验收标准

​视觉一致性：插件展开后与原网页模块布局、字体、配色完全一致。
​折叠流畅性：展开/折叠动画无卡顿（过渡时间0.3s，线性动画）。
​状态持久化：记住用户最后一次调整的宽度、折叠状态和登录信息

### 难点分析

1. 界面适配与布局
- ​固定尺寸限制：浏览器插件的弹出窗口（Popup）通常有默认尺寸限制（例如 Chrome 的 max-width: 800px; max-height: 600px），需要调整 CSS 的 width/height 或 min-width 以匹配原网页的比例。
​- 响应式调整：若原网页依赖视口单位（如 vw/vh）或媒体查询，需改为固定单位（如 px 或 %）以适应插件的固定容器。

2. ​资源本地化
​外部依赖内联化：插件禁止直接加载外部 CSS/JS/图片（受安全策略限制），需将所有资源内联或打包到插件目录中。
​路径调整：引用本地资源时需使用相对路径（如 ./styles.css）或 chrome.runtime.getURL() 动态获取路径。

3.功能兼容性
​浏览器 API 集成：若原网页依赖后端 API，插件需处理跨域请求（通过 manifest.json 声明权限）或改用插件的后台脚本（Background Script）代理请求。
​事件处理差异：插件弹窗关闭时会销毁 DOM，需避免依赖全局状态或使用存储 API（如 chrome.storage）保存数据。
​
4. 浏览器差异
​多浏览器适配：Chrome、Firefox、Edge 插件体系略有差异（如 Manifest V3 的兼容性），需针对性测试。

### 需避免的常见问题

​资源路径问题
❌ 不要使用绝对外部链接（如 http://cdn.com/jquery.js）。
✅ 所有图片、CSS、JS 必须内联或放在插件本地目录。
​布局失控
❌ 避免依赖 vw/vh 或媒体查询响应式布局。
✅ 用固定单位（如 px）约束弹窗尺寸，并测试内容溢出情况。
​数据与状态丢失
❌ 不要用 localStorage 或全局变量保存数据。
✅ 改用 chrome.storage 或 browser.storage API。
​事件监听泄露
❌ 避免在弹窗关闭后未销毁事件监听（导致内存泄漏）。
✅ 在弹窗关闭前手动解绑事件，或使用插件框架（如 React）自动管理。
​浏览器差异
❌ 不要假设 Chrome 和 Firefox 插件行为完全一致。
✅ 明确插件目标浏览器，并优先测试对应环境。
​性能忽略
❌ 禁止在弹窗中加载未优化的重型资源（如未压缩的图片）。
✅ 弹窗初始化时间需控制在 0.5 秒内。

### 可参考的开源项目
1. https://github.com/crxjs/chrome-extension-tools.git
2. https://github.com/aklinker1/vite-plugin-web-extension.git
3. https://github.com/StarkShang/vite-plugin-browser-extension.git
4. https://github.com/5tigerjelly/chrome-extension-react-template.git

# 主页面与插件界面交互需求文档

---

## ​**交互状态定义**
### 1. 初始态（未启动插件）
- ​**主页面**：  
  █ 100%浏览器视口宽度  
  █ 左侧对齐视口边缘  
  █ 无右侧空白区域  

- ​**插件界面**：  
  █ 完全隐藏（宽度0px）  
  █ 不占用文档流空间  

### 2. 插件展开态
- ​**主页面**：  
  █ 宽度 = 视口宽度 - 插件宽度 - 10px间距  
  █ 右侧边缘与插件左边缘间距10px  
  █ 通过平滑动画右移（transform: translateX）  

- ​**插件界面**：  
  █ 固定宽度300px（占视口宽度1/5，动态计算）  
  █ 右侧贴合浏览器窗口  
  █ 高度100vh（垂直占满）  

### 3. 折叠过渡态
- ​**动画规范**：  
  █ 同步动画时长：300ms  
  █ 缓动函数：cubic-bezier(0.4, 0, 0.2, 1)  
  █ 性能要求：60FPS无卡顿  

---

## ​**关键交互规则**
### 1. 插件启动流程
[用户点击触发]
→ 主页面开始右移动画（translateX(-310px)）
→ 插件界面同步从右侧滑入
→ 动画结束后更新状态标记

（注：310px = 300px插件宽度 + 10px间距）


### 2. 插件折叠流程
[用户点击折叠按钮]
→ 主页面开始左移复位动画（translateX(0)）
→ 插件界面同步滑出至右侧视口外

## 验收标准

✅ ​视觉一致性

展开/折叠过程严格对齐示意图箭头方向
插件展开后右侧间距误差≤2px
✅ ​性能规范

主页面重绘频率 ≤16.6ms/帧（60FPS）
内存泄漏检测：连续操作50次内存波动<3MB
✅ ​状态恢复

浏览器重启后状态还原成功率100%
强制刷新页面（Ctrl+F5）不破坏布局
请基于此文档实现，需特别注意示意图中的箭头移动方向与位移量比例关系。

## 补充

容器层：强制宽度自适应

问题：当前容器宽度可能被限制为固定值（如 300px），导致右侧留白。

## 补充2

/* 修改插件根容器的 CSS */
.plugin-container {
  width: 100% !important;    /* 强制填满浏览器预留区域 */
  min-width: 100%;          /* 防止内容挤压 */
  height: 100%;             /* 垂直铺满 */
  box-sizing: border-box;   /* 包含 padding 和 border */
  padding: 0;               /* 移除默认内边距 */
  margin: 0;                /* 移除默认外边距 */
}

## 修复
# AetherFlow 前端优化需求文档

功能缺陷修复
### 1. 分类排序功能失效
- ​**现象**  
  - `Sort: Last Used` 排序选项点击无响应  
  - 未触发按时间/频率/是否收藏的列表重排序  

### 2. 标签筛选功能缺失
- 当前问题
 - 无标签筛选功能
 - 新增标签筛选容器
| 属性          | 要求                                 |
|---------------|------------------------------------|
| ​**位置**       | 位于`Search prompts…`下方/提示词卡片的上方 | 
| ​**布局**       | 横向排列标签按钮，支持左右滑动浏览更多          |

场景	行为
​- 点击标签	激活高亮状态
- 要有hover状态
- ​多选叠加	同时选中多个标签时进行逻辑并集筛选
- ​空状态	显示No tags available提示文案

### 3. suggestion需要有与prompt library一样的搜索/排序/标签功能

设计风格/字体/用色要求保持视觉一致性

## 修复2
# AetherFlow 插件加载及模态窗口优化需求

## 一、当前插件在切换子页面时触发全量重新加载
问题表述：
1. ​**加载时间长**：每次切换均需重新请求数据并渲染
2. ​**操作不连贯**：用户需等待转圈动画完成才能继续操作
优化建议：缩短加载时间，优化展示效果
- 预加载
- 缓存策略
- 

---

## 二、prompt enhancement优化动画

### 1. 加载动画阶段
| 步骤          | 动画效果                              | 持续时间 |
|---------------|-------------------------------------|----------|
| ​**初始加载**   | 显示居中的旋转指示器                   | 2秒      |
| ​**过渡动画**   | 转变为带有粒子效果的脉动魔法球          | 2秒      |
| ​**加载提示**   | 显示“正在优化您的提示...” + 动态省略号 | 1.5秒    |

### 2. 结果显示阶段
| 效果          | 实现细节                              |
|---------------|-------------------------------------|
| ​**容器动画**   | 淡入带有渐变边框的容器                 |
| ​**文本显示**   | 逐字符打字效果展示优化后的文本          |
| ​**氛围增强**   | 容器周围应用柔和的发光效果              |

---

## 点击卡片后的模态窗口位置和尺寸异常
问题描述：根据图片中文字折行严重、按钮间距紧凑等问题
### 弹性填充策略
| 维度        | 实现方案                              | 视觉呈现效果              |
|-------------|-------------------------------------|-------------------------|
| ​**水平间隙** | 右侧保留8px呼吸缝 + 2px投影扩散区      | 营造悬浮纸张的立体效果      |
| ​**垂直对齐** | 顶部对齐插件导航栏，底部留出24px安全边距 | 防止与浏览器底部控件重叠    |
| ​**内容约束** | 采用`width: calc(100% - 32px)`动态宽度 | 自适应不同分辨率下的空隙比例 |